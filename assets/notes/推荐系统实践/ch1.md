## 第1章 推荐系统

### 1.1 什么是推荐系统

推荐系统不需要用户提供明确的需求，而是通过分析用户的历史行为给用户的兴趣建模，从而主动给用户推荐能够满足他们兴趣和需求的信息，能够在用户没有明确目的的时候帮助他们发现感兴趣的新内容。

------

个性化推荐应用条件：

- 存在信息过载（information overload）现象
- 用户没有明确需求

推荐算法的本质是通过一定的方式将用户和物品联系起来

------

推荐系统常用的3种联系用户和物品的方式

- 通过好友：社会化推荐（social recommendation），即让好友给自己推荐物品
- 通过历史兴趣：基于内容的推荐（content-based filtering），通过分析用户曾经看过的内容找到用户偏好，然后按上述偏好推荐内容
- 通过注册信息：基于协同过滤（collaborative filtering）的推荐，能找到和用户历史兴趣相似的一群用户，按用户群偏好推荐

### 1.2 个性化推荐系统的应用

几乎所有的推荐系统应用都是由前台的展示页面、后台的日志系统以及推荐算法系统3部分构成的

### 1.3 推荐系统评测

一个完整的推荐系统一般存在3个参与方：用户、物品提供者和提供推荐系统的网站。一个好的推荐系统是能够令三方共赢的系统。

好的推荐系统不仅仅能够准确预测用户的行为，而且能够扩展用户的视野，帮助用户发现那些他们可能会感兴趣，但却不那么容易发现的东西。同时，推荐系统还要能够帮助商家将那些被埋没在长尾中的好商品介绍给可能会对它们感兴趣的用户。

预测准确度是推荐系统领域的重要指标（没有之一）。

指标包括准确度、覆盖度、新颖度、惊喜度、信任度、透明度等。这些指标中，有些可以离线计算，有些只有在线才能计算，有些只能通过用户问卷获得。

### 1.3.1 推荐系统实验方法

#### 离线实验（offline experiment）

1. 通过日志系统获得用户行为数据，并按照一定格式生成一个标准的数据集；
2. 将数据集按照一定的规则分成训练集和测试集；
3. 在训练集上训练用户兴趣模型，在测试集上进行预测；
4. 通过事先定义的离线指标评测算法在测试集上的预测结果。

|                             优点                             |                             缺点                             |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| 不需要有对实际系统的控制权<br />不需要用户参与实验<br />速度快，可以测试大量算法 | 无法计算商业上关心的指标<br />离线实验的指标和商业指标存在差距 |

#### 用户调查（user study）

|                             优点                             |                             缺点                             |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| 获得很多体现用户主观感受的指标<br />相对在线实验风险很低，出现错误后很容易弥补 | 招募测试用户代价较大<br />很难组织大规模的测试用户，因此会使测试结果的统计意义不足<br />在很多时候设计双盲实验非常困难<br />用户在测试环境下的行为和真实环境下的行为可能有所不同 |

#### 在线实验（online experiment）

常用AB测试

|                             优点                             |                             缺点                             |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| 可以公平获得不同算法实际在线时的性能指标，包括商业上关注的指标 | 周期比较长，必须进行长期的实验才能得到可靠的结果<br />如果为不同的层分别设计AB测试系统，那么不同的AB测试之间往往会互相干扰（切分流量是AB测试中的关键） |

- 首先，需要通过离线实验证明它在很多离线指标上优于现有的算法。
- 然后，需要通过用户调查确定它的用户满意度不低于现有的算法。
- 最后，通过在线的AB测试确定它在我们关心的指标上优于现有的算法。

### 1.3.2 评测指标

- 用户满意度
- 预测准确度
	- 评分预测
	- TopN推荐
- 覆盖率
	- 基尼系数与马太效应
- 多样性
- 新颖性
- 惊喜度
- 信任度
- 实时性
- 健壮性
- 商业目标

|            | 离线实验 | 问卷调查 | 在线实验 |
| ---------- | -------- | -------- | -------- |
| 用户满意度 | ×        | √        | ○        |
| 预测准确度 | √        | √        | ×        |
| 覆盖率     | √        | √        | √        |
| 多样性     | ○        | √        | ○        |
| 新颖性     | ○        | √        | ○        |
| 惊喜度     | ×        | √        | ×        |

对于可以离线优化的指标，应该在给定覆盖率、多样性、新颖性等限制条件下，尽量优化预测准确度。

### 1.3.3 评测维度

- 用户维度：主要包括用户的人口统计学信息、活跃度以及是不是新用户等。
- 物品维度：包括物品的属性信息、流行度、平均分以及是不是新加入的物品等。
- 时间维度：包括季节，是工作日还是周末，是白天还是晚上等。