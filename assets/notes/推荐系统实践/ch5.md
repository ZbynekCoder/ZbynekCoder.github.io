## 第5章 利用上下文信息

> Alexander Tuzhilin. Context Aware Recommender Systems.

### 5.1 时间上下文信息

- 用户兴趣是变化的
- 物品也是有生命周期的
- 季节效应

#### 系统时间特性的分析

在给定时间信息后，推荐系统从一个静态系统变成了一个时变的系统，而用户行为数据也变成了时间序列。

包含时间信息的用户行为数据集由一系列三元组构成，其中每个三元组$(u,i,t)$代表了用户$u$在时刻$t$对物品$i$产生过行为。

在给定数据集后，通过统计如下信息研究系统的时间特性。

- 数据集每天独立用户数的增长情况
- 系统的物品变化情况
- 用户访问情况

#### 推荐系统的实时性

- 能够实时响应用户新的行为，让推荐列表不断变化
- 推荐算法本身具有实时性
	- 要求在每个用户访问推荐系统时，都根据用户这个时间点前的行为实时计算推荐列表
	- 推荐算法需要平衡考虑用户的近期行为和长期行为，即要让推荐列表反应出用户近期行为所体现的兴趣变化，又不能让推荐列表完全受用户近期行为的影响，要保证推荐列表对用户兴趣预测的延续性

#### 推荐算法的时间多样性

推荐系统每天推荐结果的变化程度被定义为推荐系统的时间多样性。

- 需要保证推荐系统能够在用户有了新的行为后及时调整推荐结果，使推荐结果满足用户最近的兴趣
- 需要保证推荐系统在用户没有新的行为时也能够经常变化一下结果，具有一定的时间多样性
	- 在生成推荐结果时加入一定的随机性
	- 记录用户每天看到的推荐结果，然后在每天给用户进行推荐时，对他前几天看到过很多次的推荐结果进行适当地降权
	- 每天给用户使用不同的推荐算法

#### 时间上下文推荐算法

##### 最近最热门

给定时间$T$，物品$i$最近的流行度$n_i(T)$可以定义为：
$$
n_i(T) = \sum_{(u,i,t) \in \mathrm{Train},t<T}\dfrac{1}{1 + \alpha(T - t)}
$$
$\alpha$是时间衰减参数。

##### 时间上下文相关的ItemCF算法

- 用户在相隔很短的时间内喜欢的物品具有更高相似度

	- 在无时间上下文信息时，ItemCF的物品相似度计算为
		$$
		\mathrm{sim}(i,j) = \dfrac{\left| N(i) \cap N(j) \right|}{\sqrt{\left| N(i) \right| \left| N(j) \right|}} = \dfrac{\displaystyle \sum_{u \in N(i) \cap N(j)} 1}{\sqrt{\left| N(i) \right| \left| N(j) \right|}}
		$$

	- 在得到时间信息（用户对物品产生行为的时间）后，改进物品相似度计算为
		$$
		\mathrm{sim}(i,j) = \dfrac{\displaystyle \sum_{u \in N(i) \cap N(j)} f(\left| t_{ui} - t_{uj} \right|)}{\sqrt{\left| N(i) \right| \left| N(j) \right|}}
		$$
		其中$t_{ui}$是用户$u$对物品$i$产生行为的时间，$f(\cdot)$在$\mathbb{R}^+$上单调下降

- 用户近期行为相比用户很久之前的行为，更能体现用户现在的兴趣

	- 在无时间上下文信息时，ItemCF的用户$u$对物品$i$的兴趣$p(u,i)$计算为
		$$
		p(u,i) = \sum_{j \in N(u)} \mathrm{sim}(i,j)
		$$

	- 在得到时间信息（用户对物品产生行为的时间）后，改进兴趣$p(u,i)$计算为
		$$
		p(u,i) = \sum_{j \in N(u) \cap S(i,K)} \mathrm{sim}(i,j) g(\left| t_{ui} - t_{0} \right|)
		$$
		其中$g(\cdot)$在$\mathbb{R}^+$上单调下降

##### 时间上下文相关的UserCF算法

- 如果两个用户同时（在相近的时间）喜欢相同的物品，那么这两个用户应该有更大的兴趣相似度
	$$
	w_{uv} = \dfrac{\displaystyle \sum_{i \in N(u) \cap N(v)}f(\left| t_{ui} - t_{vi} \right|)}{\sqrt{\left| N(u) \cup N(v) \right|}}
	$$

- 应该给用户推荐和他兴趣相似的用户最近喜欢的物品
	$$
	p(u,i) = \sum_{v \in S(u,K)} w_{uv} r_{vi} g(\left| t_{vi} - t_0 \right|)
	$$

#### 时间段图模型

#todo

### 5.2 地点上下文信息

LARS（Location Aware Recommender System，位置感知推荐系统）

- （用户，用户位置，物品，评分），每一条记录代表了某一个地点的用户对物品的评分
- （用户，物品，物品位置，评分），每一条记录代表了用户对某个地方的物品的评分
- （用户，用户位置，物品，物品位置，评分），每一条记录代表了某个位置的用户对某个位置的物品的评分

------

- 兴趣本地化：不同地方的用户兴趣存在着很大的差别。不同国家和地区用户的兴趣存在着一定的差异性
- 活动本地化：一个用户往往在附近的地区活动